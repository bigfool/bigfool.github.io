<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
    <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="1 常用命令df -h 查看挂载的设备 dmesg 用来显示开机信息，kernel会将开机信息存储在ring buffer中。您若是开机时来不及查看信息，可利用dmesg来查看。开机信息亦保存在/var/log目录中，名称为dmesg的文件里。 开机时候的硬件检测信息在这里面存着。
2 数据恢复工具sleuthkit先了解了，以后再深入学习使用。

sudo apt-get install slu">
<meta property="og:type" content="article">
<meta property="og:title" content="Android取证基础知识">
<meta property="og:url" content="http://www.kechuandai.net/2015/11/02/Android取证基础知识/index.html">
<meta property="og:site_name" content="大憨的XXX">
<meta property="og:description" content="1 常用命令df -h 查看挂载的设备 dmesg 用来显示开机信息，kernel会将开机信息存储在ring buffer中。您若是开机时来不及查看信息，可利用dmesg来查看。开机信息亦保存在/var/log目录中，名称为dmesg的文件里。 开机时候的硬件检测信息在这里面存着。
2 数据恢复工具sleuthkit先了解了，以后再深入学习使用。

sudo apt-get install slu">
<meta property="og:image" content="http://dahan.qiniudn.com/2014.8.7forensics1.png">
<meta property="og:image" content="http://dahan.qiniudn.com/2014.8.7forensics2.png">
<meta property="og:image" content="http://dahan.qiniudn.com/2014.8.7forensics3.png">
<meta property="og:image" content="http://dahan.qiniudn.com/2014.8.7forensics4.png">
<meta property="og:image" content="http://dahan.qiniudn.com/2014.8.7forensics5.png">
<meta property="og:updated_time" content="2015-11-01T18:33:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android取证基础知识">
<meta name="twitter:description" content="1 常用命令df -h 查看挂载的设备 dmesg 用来显示开机信息，kernel会将开机信息存储在ring buffer中。您若是开机时来不及查看信息，可利用dmesg来查看。开机信息亦保存在/var/log目录中，名称为dmesg的文件里。 开机时候的硬件检测信息在这里面存着。
2 数据恢复工具sleuthkit先了解了，以后再深入学习使用。

sudo apt-get install slu">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Android取证基础知识 | 大憨的XXX </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">大憨的XXX</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">谁会来买kechuandai.net啊</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            標籤
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Android取证基础知识
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            發表於
            <time itemprop="dateCreated" datetime="2015-11-02T02:30:54+08:00" content="2015-11-02">
              2015-11-02
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h2 id="1_常用命令">1 常用命令</h2><p>df -h 查看挂载的设备 dmesg 用来显示开机信息，kernel会将开机信息存储在ring buffer中。您若是开机时来不及查看信息，可利用dmesg来查看。开机信息亦保存在/var/log目录中，名称为dmesg的文件里。 开机时候的硬件检测信息在这里面存着。</p>
<h2 id="2_数据恢复工具sleuthkit">2 数据恢复工具sleuthkit</h2><p>先了解了，以后再深入学习使用。</p>
<blockquote>
<p>sudo apt-get install sluthkit sudo apt-get install autospy</p>
</blockquote>
<p>查看某个分区命令：</p>
<blockquote>
<p>sudo fsstat /dev/sdc sudo mmls /dev sdb</p>
</blockquote>
<h2 id="3_Android数据存储">3 Android数据存储</h2><p>持久数据存储的五种存储方式： - 共享优先 - 内部存储 - 外部存储 - SQLite - 网络</p>
<p>Android应用一般把数据存储在两个地方：内部存储和外部存储。应用在安装的时候会在内部存储的</p>
<h3 id="3-1_共享优先">3.1 共享优先</h3><p>Shared Preference是一种简单的、轻量级的名称/值对（VNP)机制，用于保存原始应用程序数据，最常见的是用户的应用程序首选项。存储格式为XML，存储的类型有： - boolean - folat 单精度32位IEEE 754浮点数 - int - long - strings 通常是utf-8编码</p>
<p>比如美团的客户端： <img src="http://dahan.qiniudn.com/2014.8.7forensics1.png" alt="Alt text"></p>
<p>其中loginStroe.xml内容如下：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">'1.0'</span> encoding=<span class="string">'utf-8'</span> standalone=<span class="string">'yes'</span> ?&gt;</span><br><span class="line">&lt;map&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"bindedBankCard"</span> <span class="keyword">value</span>=<span class="string">"0"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"hasPaymentPassword"</span> <span class="keyword">value</span>=<span class="string">"0"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"saveAmount"</span>&gt;<span class="number">0.0</span>&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"avatarurl"</span>&gt;&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">long</span> name=<span class="string">"id"</span> <span class="keyword">value</span>=<span class="string">"32793294"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"username"</span>&gt;大憨<span class="number">846</span>&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"token"</span>&gt;×××××××××××××××××××&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"value"</span>&gt;<span class="number">0.0</span>&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"growthlevel"</span> <span class="keyword">value</span>=<span class="string">"2"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"hasPassword"</span> <span class="keyword">value</span>=<span class="string">"1"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"saveTimes"</span> <span class="keyword">value</span>=<span class="string">"0"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"pointvalue"</span> <span class="keyword">value</span>=<span class="string">"164"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"growthvalue"</span> <span class="keyword">value</span>=<span class="string">"1167"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"SID"</span>&gt;××××××××××××××××&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">null</span> name=<span class="string">"al"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"isAppUser"</span> <span class="keyword">value</span>=<span class="string">"1"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"oauth_login_result"</span>&gt;&#123;&amp;quot;a&amp;quot;:&amp;quot;tencent&amp;quot;,&amp;quot;b&amp;quot;:&amp;quot;E765B31B8DB83B6309D41A472ED9093D&amp;quot;,&amp;quot;d&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;c&amp;quot;:<span class="number">1401330213950</span>&#125;&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"email"</span>&gt;&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"avatartype"</span> <span class="keyword">value</span>=<span class="string">"0"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"reallevel"</span> <span class="keyword">value</span>=<span class="string">"2"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"loginTimes"</span> <span class="keyword">value</span>=<span class="string">"19"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">int</span> name=<span class="string">"bindedMobile"</span> <span class="keyword">value</span>=<span class="string">"1"</span> /&gt;</span><br><span class="line">&lt;<span class="keyword">string</span> name=<span class="string">"mobile"</span>&gt;<span class="number">135</span>****×××××××&lt;/<span class="keyword">string</span>&gt;</span><br><span class="line">&lt;/map&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-2_内部存储">3.2 内部存储</h3><p>在内部存储器上的/data/data目录下建立一个以应用程序包名为名字的子目录存储应用的数据。 最常见的应用程序数据标准目录为： <strong>表1 /data/data/&lt;软件包名称&gt;子目录</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">目录</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">shared_prefs</td>
<td style="text-align:left">以XML格式存储的共享优先目录</td>
</tr>
<tr>
<td style="text-align:left">lib</td>
<td style="text-align:left">自定义的库文件</td>
</tr>
<tr>
<td style="text-align:left">files</td>
<td style="text-align:left">开发者存储的文件</td>
</tr>
<tr>
<td style="text-align:left">cache</td>
<td style="text-align:left">应用程序缓存文件</td>
</tr>
<tr>
<td style="text-align:left">databases</td>
<td style="text-align:left">SQLite数据库和日志文件</td>
</tr>
</tbody>
</table>
<h3 id="3-3_外部存储">3.3 外部存储</h3><h3 id="3-4_SQLite">3.4 SQLite</h3><p>Android应用的SQLite文件通常存储在内部存储器的/data/data/&lt;应用程序包名&gt;/databases目录下，属于应用私有的，只能被创建他们的应用程序访问。但是，对于在其他地方创建的数据库没有设置任何限制。 <img src="http://dahan.qiniudn.com/2014.8.7forensics2.png" alt="Alt text"></p>
<p>如何将其拷贝出来? 这主要是因为权限问题，adb shell中使用命令su root转为root权限，然后修改文件夹和文件的权限为777</p>
<blockquote>
<p>adb shell su root chmod 777 /data/data/com.sankuai.meituan/databases chmod 777 /data/data/com.sankuai.meituan/databases/meituan.db</p>
</blockquote>
<p>再在Ubutud的另外一个终端中输入：</p>
<blockquote>
<p>adb pull /data/data/com.sankuai.meituan/databases/meituan.db</p>
</blockquote>
<p>将meituan.db拷贝到了Ubuntu终端中的当前目录</p>
<p>拷贝出来后，可以使用一下sqlite3命令打开</p>
<blockquote>
<p>sqlite3 dbname.db</p>
</blockquote>
<p>然后可以用SQL语句查看数据库</p>
<p><img src="http://dahan.qiniudn.com/2014.8.7forensics3.png" alt="Alt text"></p>
<p>或者使用图形界面的SQLite管理工具，在Ubuntu下，大憨推荐使用SQLiteMan。</p>
<h2 id="4_内核、系统和应用日志">4 内核、系统和应用日志</h2><h3 id="4-1_Linux内核日志">4.1 Linux内核日志</h3><p>使用命令dmesg查看。</p>
<h3 id="4-2_Logcat">4.2 Logcat</h3><p>Logcat 显示系统更新和应用程序调试信息 <strong>查看无线电日志</strong>：</p>
<blockquote>
<p>adb shell logcat -b radio</p>
</blockquote>
<p>这些日志有如下信息： - 事件时间（以UNIX时间格式表达） - 蜂窝调制解调器进行通信使所使用的AT命令 - 接收者、时间以及编码的短信消息 - 终端设备的蜂窝IP地址、网络以及地点信息 - 无线通信服务提供商信息</p>
<p><em>tips Unix 时间转标准时间:</em></p>
<blockquote>
<p>date -d @1407199900</p>
</blockquote>
<p><img src="http://dahan.qiniudn.com/2014.8.7forensics4.png" alt="Alt text"></p>
<p><strong>查看事件日志</strong></p>
<blockquote>
<p>adb shell logcat -b event</p>
</blockquote>
<h3 id="4-3_dumpsys">4.3 dumpsys</h3><p>dumpsys提供关于服务、存储及系统其他方面很细节的信息。</p>
<blockquote>
<p>dumpsys [Option] [package_name | pid] Option: meminfo 显示内存信息 cpuinfo 显示CPU信息 account 显示accounts信息,感觉这个最有用了 activity 显示所有的activities的信息 window 显示键盘，窗口和它们的关系 wifi 显示wifi信息 location 显示位置信息，有基站和GPS的 更多信息： 1 SurfaceFlinger 2 accessibility 3 account 4 activity 5 alarm 6 appwidget 7 audio 8 backup 9 battery 10 batteryinfo 11 bluetooth 12 bluetooth_a2dp 13 clipboard 14 connectivity 15 content 16 cpuinfo 17 device_policy 18 devicestoragemonitor 19 diskstats 20 dropbox 21 entropy 22 ethernet 23 hardware 24 input_method 25 iphonesubinfo 26 isms 27 keybar 28 location 29 media.audio_flinger 30 media.audio_policy 31 media.camera 32 media.player 33 meminfo 34 mount 35 netstat 36 network_management 37 notification 38 package 39 permission 40 phone 41 power 42 search 43 sensorservice 44 simphonebook 45 statusbar 46 telephony.registry 47 throttle 48 uimode 49 usagestats 50 vibrator 51 wallpaper 52 wifi 53 window</p>
</blockquote>
<h3 id="4-4_dumpstate">4.4 dumpstate</h3><p>显示了很多调试信息和系统信息。 dumpstate信息：</p>
<table><br>  <thead><br>    <tr><br>      <th align="left"><br>        分段区域<br>      </th><br><br>      <th align="left"><br>        文件或者命令<br>      </th><br><br>      <th align="left"><br>        备注<br>      </th><br>    </tr><br>  </thead><br><br>  <tbody><br>    <tr><br>      <td align="left"><br>        Strack traces<br>      </td><br><br>      <td align="left"><br>        没有<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Device info<br>      </td><br><br>      <td align="left"><br>        没有<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        System<br>      </td><br><br>      <td align="left"><br>        没有<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Memory info<br>      </td><br><br>      <td align="left"><br>        /proc/meminfo<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Cpu info<br>      </td><br><br>      <td align="left"><br>        top -n 1 -d 1 -m 30 -t<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Procrank<br>      </td><br><br>      <td align="left"><br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Virtual memory stats<br>      </td><br><br>      <td align="left"><br>        /proc/vmstat<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Vmalloc info<br>      </td><br><br>      <td align="left"><br>        /proc/vmallocinfo<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Slab info<br>      </td><br><br>      <td align="left"><br>        /proc/slabinfo<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Zone info<br>      </td><br><br>      <td align="left"><br>        /proc/zoneinfo<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        System log<br>      </td><br><br>      <td align="left"><br>        logcat -v time -d <em>:v<br>      </em></td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Envent log<br>      </td><br><br>      <td align="left"><br>        logcat -b envents -v time -d :v<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Radio log<br>      </td><br><br>      <td align="left"><br>        logcat -b radio -v time -d *:v<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Network interfaces<br>      </td><br><br>      <td align="left"><br>        netcfg<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Network routes<br>      </td><br><br>      <td align="left"><br>        /proc/net/route<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Arp cache<br>      </td><br><br>      <td align="left"><br>        /proc/net/arp<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Dump Wi-Fi firmware log<br>      </td><br><br>      <td align="left"><br>        su root dhutil -i eth0 upload/data/local/tmp/ wlan_crash.dump<br>      </td><br><br>      <td align="left"><br>        命令未成功<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        System propertiess<br>      </td><br><br>      <td align="left"><br>        没有<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Kernel log<br>      </td><br><br>      <td align="left"><br>        dmesg<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Kernel wakelocks<br>      </td><br><br>      <td align="left"><br>        /proc/wakelocks<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Kernel cpufreq<br>      </td><br><br>      <td align="left"><br>        /sys/devices/system/cpu/cpu0/cpufreq/stats/time_in_state<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Vold dump<br>      </td><br><br>      <td align="left"><br>        vdc dump<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Secure containers<br>      </td><br><br>      <td align="left"><br>        vdc asec list<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Processes<br>      </td><br><br>      <td align="left"><br>        ps -p<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Processes and threads<br>      </td><br><br>      <td align="left"><br>        ps -t -p -p<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Librank<br>      </td><br><br>      <td align="left"><br>        (librank)<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Binder failed transaction log<br>      </td><br><br>      <td align="left"><br>        /proc/binder/failed_transcation_log<br>      </td><br><br>      <td align="left"><br>        华为M1未发现<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Binder transaciton log<br>      </td><br><br>      <td align="left"><br>        /proc/binder/transcation_log<br>      </td><br><br>      <td align="left"><br>        华为M1未发现<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Binder transcations<br>      </td><br><br>      <td align="left"><br>        /proc/binder/transcations<br>      </td><br><br>      <td align="left"><br>        华为M1未发现<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Binder stats<br>      </td><br><br>      <td align="left"><br>        /proc/binder/stats<br>      </td><br><br>      <td align="left"><br>        华为M1未发现<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Binder process stat<br>      </td><br><br>      <td align="left"><br>        sh -c cat/proc/binder/proc/ -p<br>      </td><br><br>      <td align="left"><br>        华为M1未发现<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        File System and free space<br>      </td><br><br>      <td align="left"><br>        df<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Package settings<br>      </td><br><br>      <td align="left"><br>        /data/system/packages.xml<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Package uid errors<br>      </td><br><br>      <td align="left"><br>        /data/system/uiderrors.txt<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Last kmsg<br>      </td><br><br>      <td align="left"><br>        /proc/last_kmsg<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Last radio log<br>      </td><br><br>      <td align="left"><br>        parse_radio_log/proc/last_radio_log<br>      </td><br><br>      <td align="left"><br>        华为M1未发现<br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Last panic console<br>      </td><br><br>      <td align="left"><br>        /data/dontpanic/apanic_console<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Last panic threads<br>      </td><br><br>      <td align="left"><br>        /data/dontpanic/apanic_threads<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Blocked process wait<br>      </td><br><br>      <td align="left"><br>        没有<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        channels<br>      </td><br><br>      <td align="left"><br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Backlights<br>      </td><br><br>      <td align="left"><br>        没有<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br><br>    <tr><br>      <td align="left"><br>        Dumpsys<br>      </td><br><br>      <td align="left"><br>        dumpsys<br>      </td><br><br>      <td align="left"><br>      </td><br>    </tr><br>  </tbody><br></table>

<h3 id="4-5_bugreporter">4.5 bugreporter</h3><p>将logcat、dumpsys和dumpstate输出结合在一起，提交调试报告。 可将结果重定向到一个文件中，以便分析。</p>
<h2 id="5_RAM进程内存转储">5 RAM进程内存转储</h2><p>在POSIX兼容的平台上，SIGUSR1和SIGUSR2是发送给一个进程的信号，它表示了用户定义的情况。它们的符号常量在头文件signal.h中定义。在不同的平台上，信号的编号可能发生变化。</p>
<p>Android将应用程序所使用的内存转储成为一个文件的机制：向该应用程序发送一个特别的信号（SIGUSR1），信号编号为1294。 具体操作步骤： S1 改变转储结果所在目录的访问权限：</p>
<blockquote>
<p>adb shell su root chmod 777 /data/misc</p>
</blockquote>
<p>S2 在获取应用程序的进程号，比如美团客户端的：</p>
<blockquote>
<p>adb shell ps | grep meituan</p>
</blockquote>
<p><img src="http://dahan.qiniudn.com/2014.8.7forensics5.png" alt="Alt text"></p>
<p>其PID为14606</p>
<p>S3 使用kill命令向进程发送信号：</p>
<blockquote>
<p>kill -10 14606</p>
</blockquote>
<p>可是没有成功，后来查询stack overflow才知道，在新Android的新平台上已经舍弃了这种方法。 可以使用MAT。</p>
</span>
      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/11/02/使用drozer对Android应用进行安全评估/" rel="next" title="使用drozer对Android应用进行安全评估">
                <i class="fa fa-chevron-left"></i> 使用drozer对Android应用进行安全评估
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/11/02/Kali更新Metaploit失败解决办法/" rel="prev" title="Kali更新Metaploit失败解决办法">
                Kali更新Metaploit失败解决办法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="憨哥" itemprop="image"/>
          <p class="site-author-name" itemprop="name">憨哥</p>
        </div>
        <p class="site-description motion-element" itemprop="description">一辈子太长有做个有趣的人</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">16</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分類</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">標籤</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1_常用命令"><span class="nav-number">1.</span> <span class="nav-text">1 常用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2_数据恢复工具sleuthkit"><span class="nav-number">2.</span> <span class="nav-text">2 数据恢复工具sleuthkit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3_Android数据存储"><span class="nav-number">3.</span> <span class="nav-text">3 Android数据存储</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1_共享优先"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 共享优先</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2_内部存储"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 内部存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3_外部存储"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 外部存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4_SQLite"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 SQLite</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4_内核、系统和应用日志"><span class="nav-number">4.</span> <span class="nav-text">4 内核、系统和应用日志</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1_Linux内核日志"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 Linux内核日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2_Logcat"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 Logcat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3_dumpsys"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 dumpsys</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4_dumpstate"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 dumpstate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5_bugreporter"><span class="nav-number">4.5.</span> <span class="nav-text">4.5 bugreporter</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5_RAM进程内存转储"><span class="nav-number">5.</span> <span class="nav-text">5 RAM进程内存转储</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">憨哥</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
